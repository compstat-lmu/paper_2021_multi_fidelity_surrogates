---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Surrogates for Multi-Fidelity Problems

This package contains several surrogates that approximate the hyperparameter response surface for
several interesting machine learing algorithms across several tasks.



```{r, echo=FALSE}
dt = data.frame(
  instance = c("NASBench301", "RBV2-SVM"),
  space = c("Cat+Dep", "Mix+Dep"),
  dims = c(35L, 7L),
  fidelity = c("epochs", "NA"),
  n_problems = c(1L, 100L)
)
knitr::kable(dt)
```

Toy test functions:

```{r, echo=FALSE}
dt = data.frame(
  instance = c("Branin"),
  space = c("Num"),
  dims = c(2L),
  fidelity = c("fidelity"),
  n_problems = c(1L)
)
knitr::kable(dt)
```



# Overview

This should perhaps have a table of implemented surrogates

## NASBench-301

We first load the config:

```{r}
library(checkmate)
library(paradox)
library(mfsurrogates)
cfg = BenchmarkConfigNB301$new(
  workdir = "/tmp/"
)
cfg$setup()
```

this config contains our `objective` which we can use to optimize.

```{r}
library("bbotk")
library("data.table")
ins = OptimInstanceMultiCrit$new(
  objective = cfg$get_objective(),
  terminator = trm("evals", n_evals = 10L)
 )
# opt('random_search')$optimize(ins)
```

## Branin

We first load the config:

```{r}
library(checkmate)
library(paradox)
library(mfsurrogates)
cfg = BenchmarkConfigBranin$new()
#plot(cfg, method = "rgl") # or ggplot2
```

this config contains our `objective` which we can use to optimize.

```{r}
library("bbotk")
library("data.table")
ins = OptimInstanceSingleCrit$new(
  objective = cfg$get_objective(),
  terminator = trm("evals", n_evals = 10L)
 )
# opt('random_search')$optimize(ins)
```


## RandomBotv2 - SVM

We first load the config:

```{r,eval=FALSE}
library(mfsurrogates)
workdir = paste0(path.expand("~"), "/LRZ Sync+Share/multifidelity_data/")
cfg = cfgs("rbv2_svm", workdir = workdir)
```

this config contains our `objective` which we can use to optimize.

```{r,eval=FALSE}
library("bbotk")
library("data.table")
ins = OptimInstanceMultiCrit$new(
  objective = cfg$get_objective(),
  terminator = trm("evals", n_evals = 10L)
)
opt('random_search')$optimize(ins)
```


## RandomBotv2 - rpart

We first load the config:

```{r,eval=FALSE}
workdir = paste0(path.expand("~"), "/..", "/LRZ Sync+Share/multifidelity_data/")
cfg = cfgs("rbv2_rpart", workdir = workdir)
```

this config contains our `objective` which we can use to optimize.

```{r,eval=FALSE}
library("bbotk")
library("data.table")
ins = OptimInstanceMultiCrit$new(
  objective = cfg$get_objective(),
  terminator = trm("evals", n_evals = 10L)
)
opt('random_search')$optimize(ins)
```
